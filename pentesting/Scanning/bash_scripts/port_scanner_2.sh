#!/bin/bash

# Usage: ./port_scan.sh <hostname or IP> <start_port> <end_port>

if [ "$#" -ne 3 ]; then
    echo "Usage: $0 <hostname or IP> <start_port> <end_port>"
    exit 1
fi

HOST=$1
START_PORT=$2
END_PORT=$3

# Check if ports are valid numbers
if ! [[ "$START_PORT" =~ ^[0-9]+$ ]] || ! [[ "$END_PORT" =~ ^[0-9]+$ ]]; then
    echo "Error: Ports must be valid numbers."
    exit 1
fi

if [ "$START_PORT" -gt "$END_PORT" ]; then
    echo "Error: Start port must be less than or equal to end port."
    exit 1
fi

# Scan ports
for (( port=$START_PORT; port<=$END_PORT; port++ )); do
    timeout 1 bash -c "echo >/dev/tcp/$HOST/$port" 2>/dev/null && echo "Port $port is open"
done
