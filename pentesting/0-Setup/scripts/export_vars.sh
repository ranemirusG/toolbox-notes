#!/bin/env bash

# File path to variables.md in the current directory
file="./project_vars.md"
temp_vars="$HOME/.local/zshrc/temp_vars"

touch $temp_vars

# Check if variables.md exists and is readable in the current directory
if [ -r "$file" ]; then
    # Read each line in the file
    while IFS= read -r line; do
        # Ignore lines that are not variable assignments
        if [[ "$line" =~ ^[[:space:]]*([^#=]+)=([^#]+)$ ]]; then
            # Extract variable name and value
            varname="${BASH_REMATCH[1]}"
            varvalue="${BASH_REMATCH[2]}"
            
            # Export the variable
            export "$varname"="$varvalue"
            
            echo "Exported: $varname=$varvalue"
            echo "$varname=$varvalue" >> $temp_vars
        fi
    done < "$file"
else
    echo "Error: $file does not exist or is not readable."
    exit 1
fi

