#!/usr/bin/env bash

current_date=$(date +'%d-%m-%Y')
exec_dir=$(pwd)

# Check if the user provided an argument
if [ -z "$1" ]; then
  echo "Usage: $0 project_name"
  exit 1
fi

# Set the project name to the first argument
project_name=$1

# Create a directory with the project name
mkdir -p "$exec_dir/$project_name" || { echo "Failed to create directory $exec_dir/$project_name"; exit 1; }

# Change to the project directory
cd "$exec_dir/$project_name" || { echo "Failed to change directory to $exec_dir/$project_name"; exit 1; }

# Create subdirectories
subdirectories=(
    "scans"
    "payloads"
    "screenshots"
    "downloads"
)

for i in "${subdirectories[@]}"; do
    mkdir -p "$i"
done




# Create notes.md file

notes_template="# ${project_name}
Date: ${current_date}

## Notes

"

echo "${notes_template}" > notes.md



# Create project_vars.md
vars_template=" # Project variables
my_ip=
target_ip=
target_url=

"

echo "${vars_template}" > project_vars.md


tree "${project_name}"
cd "${project_name}"


# Output message
# msg="
# Project directory structure for ${project_name} created at ${exec_dir}/${project_name}
# Subdirectories: $(IFS=', '; echo "${subdirectories[*]}")
# Notes file: notes.md
# "
# echo "${msg}"
