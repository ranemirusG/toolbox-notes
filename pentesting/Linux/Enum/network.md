# Network Interfaces / Routes / Open Ports

```
ifconfig
ifconfig -a

ip
ip a
ip addr

route
routel


netstat
netstat -antp
ss
ss -anp
ss -ntplu

```




### verify whether we have rights to capture network traffic

`tcpdump` is the de facto command line standard for packet capture, and it requires administrative access since it operates on raw sockets. 

It's common to find IT personnel accounts have been given exclusive access to this tool for troubleshooting purposes.

`tcpdump` cannot be run without `sudo` permissions. That is because it needs to set up raw sockets in order to capture traffic, which is a privileged operation.

Example:
Capture traffic in and out of the loopback interface, then dump its content in ASCII using the `-A` parameter and filter any traffic containing the "pass" keyword.
```
sudo tcpdump -i lo -A | grep "pass"
```



## Firewall Rules
In general, we're primarily interested in a firewall's state, profile, and rules during the remote exploitation phase of an assessment.
However, this information can also be useful during privilege escalation.
For example, if a network service is not remotely accessible because it is blocked by the firewall, it is generally accessible locally via the loopback interface. If we can interact with these services locally, we may be able to exploit them to escalate our privileges on the local system.

During this phase, we can also gather information about inbound and outbound port filtering to facilitate port forwarding and tunneling when it's time to pivot to an internal network.

On Linux-based systems, we must have root privileges to list firewall rules with `iptables`.
However, depending on how the firewall is configured, we may be able to glean information about the rules as a standard user.

Example:
```
joe@debian-privesc:~$ cat /etc/iptables/rules.v4
# Generated by xtables-save v1.8.2 on Thu Aug 18 12:53:22 2022
*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
-A INPUT -p tcp -m tcp --dport 1999 -j ACCEPT
COMMIT
# Completed on Thu Aug 18 12:53:22 2022

```
Since this file is read-only by any users other than root, we can inspect its contents. We'll notice a non-default rule that explicitly allows the destination `port 1999`. This configuration detail stands out and should be noted for later investigation.

