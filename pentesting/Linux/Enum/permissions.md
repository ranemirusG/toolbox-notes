# Permissions

## File Permissions
```
# search for every directory writable by the current user
find / -writable -type d 2>/dev/null
```


### setuid and setgid

If these two rights are set, either an uppercase or lowercase "s" will appear in the permissions. This allows the current user to execute the file with the rights of the owner (setuid) or the owner's group (setgid).

When running an executable, it normally inherits the permissions of the user that runs it. However, if the SUID permissions are set, the binary will run with the permissions of the file owner. This means that if a binary has the SUID bit set and the file is owned by root, any local user will be able to execute that binary with elevated privileges.

When a user or a system-automated script launches a SUID application, it inherits the UID/GID of its initiating script: this is known as effective UID/GID (eUID, eGID), which is the actual user that the OS verifies to grant permissions for a given action.

Any user who manages to subvert a setuid root program to call a command of their choice can effectively impersonate the root user and gains all rights on the system. Penetration testers regularly search for these types of files when they gain access to a system as a way of escalating their privileges.

We can use `find` to search for SUID-marked binaries. In this case, we are starting our search at the root directory (/), searching for files (-type f) with the SUID bit set, (-perm -u=s) and discarding all error messages (2>/dev/null):

```
find / -perm -u=s -type f 2>/dev/null
```


If you discover an unusual SUID binary, you can try running the `strings` command on it to extract any readable text or strings.





### Linux Capabilities

Enumerate our target system for binaries with capabilities
```
/usr/sbin/getcap -r / 2>/dev/null
```



exploit perl capabilities
```
echo -ne '#!/bin/perl \nuse POSIX qw(setuid); \nPOSIX::setuid(0); \nexec "bin/bash";'
```

