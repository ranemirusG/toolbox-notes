# Passive Information Gathering

Without engaging with the target system.

See: OSINT

What information are we looking for?
- IP addresses and DNS information
- Domain names and domain ownership information
- Email addresses and social media profiles
- Web technologies being used on target sites
- Subdomains












## Metadata
Inspect the metadata tags of publicly-available documents associated with
the target organization

Exiftool
```
# -a to display duplicated tags
# -u to display unknown tags along with the filename
exiftool -a -u brochure.pdf

```





## Client Fingerprinting
- <https://canarytokens.com/nest/>



















## host

```
host google.com
```



Get the authoritative DNS servers, i.e. the name servers that contain all records for a domain. `-t ns` argument to query the nameserver records of the offseclab.io domain:
```
host -t ns offseclab.io
# Output:
offseclab.io name server ns-1536.awsdns-00.co.uk.
offseclab.io name server ns-512.awsdns-00.net.
offseclab.io name server ns-0.awsdns-00.com.
offseclab.io name server ns-1024.awsdns-00.org.
```


### Reverse DNS Lookup
query the authoritative DNS servers for a domain

```
host [public IP address]
```

Example:
```
host 52.70.117.69
69.117.70.52.in-addr.arpa domain name pointer ec2-52-70-117-69.compute-1.amazonaws.com

whois 52.70.117.69 | grep "OrgName"
OrgName:        Amazon Technologies Inc.

```



## whois

We can check the DNS registrar information of the domains.
We'll pipe the output to the grep command to filter only the line that contains the organization name.
```
whois awsdns-00.com | grep "Registrant Organization"
```


`whois` is a TCP service, tool, and a type of database that can provide information about a domain name, such as the name server and registrar. This information is often public since registrars charge a fee for private registration.

- Online tool: <https://who.is/>
- RFC 3912 
- <https://en.wikipedia.org/wiki/WHOIS >
- <https://en.wikipedia.org/wiki/Name_server >
- <https://en.wikipedia.org/wiki/Domain_name_registrar >


Looks up the registration record associated with a domain name.
Domains are leased out by companies called Domain Registrars.
Many registrants subscribe to privacy services to avoid their email addresses being harvested.

Look for:
	- Registrar (ex: namecheap.com)
	- Name Server (ex: cloudflare.com)

Example: `whois megacorpone.com`


Reverse lookup: `whois [IP]`







## nslookup (Name Server Lookup)
RFC 1034

IP addresses associated with a domain name (and viceversa)

use: `nslookup OPTIONS DOMAIN_NAME SERVER` or as an interactive prompt, just `nslookup`

### Options:
```
A		IPv4 Addresses
AAAA	IPv6 Addresses
CNAME	Canonical Name
MX		Mail Servers
SOA		Start of Authority
TXT		TXT Records
```

example:
`nslookup -type=A tryhackme.com 1.1.1.1`
`nslookup -type=MX tryhackme.com`



find the authoritative name servers for a domain (NS query)
```
> nslookup
> set query=ns
> stackoverflow.com
```






## dig (Domain Information Groper)

Returns more info than `nslookup`
Allows us to manually query recursive DNS servers of our choice for information about domains
Very useful tool for network troubleshooting

use: `dig DOMAIN_NAME TYPE`
```
dig tryhackme.com MX
dig tryhackme.com A
dig @1.1.1.1 tryhackme.com MX
dig www.ekoparty.org +short
```











## DNSRecon
`dnsrecon`

- <https://dnsdumpster.com/>





`recon-ng`







## Shodan

https://shodan.io/














## Websites and Pluggins / Footprinting

- Wappalizer
- BuiltWith add-on
- <https://dnsdumpster.com/>
- <zoomeye.org>



## whatweb
```
whatweb http://192.168.50.244
```


## HTTrack
Download the website to local computer

`sudo apt-get install webhttrack`

- <https://www.httrack.com/>




## netcraft
- <https://sitereport.netcraft.com/>








## wafw00f
Detect firewall

- <https://github.com/EnableSecurity/wafw00f>


```
wafw00f [website]

# Test all possible WAF instances
wafw00f -a [website]
```







## Sublist3r
Passive


- <https://github.com/aboul3la/Sublist3r>

```
./sublist3r.py -d example.com | httpx -silent -sc

sublist3r -d hackersploit.org -e google,yahoo
```







## The Harvester
Can be used to subdomain enumeration.

- <https://github.com/laramies/theHarvester>







