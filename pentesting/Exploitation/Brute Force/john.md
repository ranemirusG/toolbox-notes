# John The Ripper

- <https://www.openwall.com/john/>
- <https://github.com/openwall/john>



## Encrypted file hash cracking
Common files like zip, 7z, rar, keepass, sshkey
```
zip2john > zip.hash
7z2john > 7z.hash
rar2john > rar.hash
keepass2john > kee.hash
john *.hash
```






## Rules

We need to add a name for the rules and append them to the /etc/john/john.conf configuration file.
Example:

we'll name the rule sshRules with a "List.Rules" rule naming syntax
```
cat ssh.rule
# Output:
[List.Rules:sshRules]
c $1 $3 $7 $!
c $1 $3 $7 $@
c $1 $3 $7 $#
```

append the contents of our rule file into `/etc/john/john.conf`
```
sudo sh -c 'cat /home/kali/passwordattacks/ssh.rule >> /etc/john/john.conf'
```

Then crack the passphrase:
```
john --wordlist=ssh.passwords --rules=sshRules ssh.hash
```










## Commands


```
echo '$2y$10$iOrk210RQSAzNCx6Vyq2X.aJ/D.GuE4jRIikYiWrD3TM/PjDnXm4q' > hash.txt
john --wordlist=/usr/share/wordlists/rockyou.txt hash.txt
```




sha512

```
john --format=raw-sha512 --wordlist=/usr/share/wordlists/rockyou.txt hash.txt
```







## SSH
```
ssh2john id_rsa > ssh.hash


john --wordlist=/usr/share/wordlists/rockyou.txt ssh.hash
```







## KeePass

```
keepass2john Database.kdbx > keepass.hash

```



The JtR script prepended the filename Database to the hash.
The script does this to act as the username for the target hash.
This is helpful when cracking database hashes, since we want the output to contain the corresponding username and not only the password.
Since KeePass uses a master password without any kind of username, we need to remove the "Database:" string with a text editor.

